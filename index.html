<!DOCTYPE html><html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Online Calculator</title>
  <style>
    :root {
      --bg: #0f1226;
      --panel: #171a35;
      --btn: #22264d;
      --btn-accent: #2f62ff;
      --text: #f1f3f9;
      --muted: #aeb6cf;
      --danger: #ff4d6d;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }* { box-sizing: border-box; }
body {
  margin: 0; min-height: 100vh; display: grid; place-items: center;
  background: radial-gradient(90rem 90rem at 10% 10%, #1a1f3f 0, #0b0f25 50%, #050714 100%);
  color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  padding: 24px;
}

.calc {
  width: min(420px, 95vw);
  background: linear-gradient(180deg, #1a1f3f 0%, var(--panel) 100%);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 18px;
  position: relative;
  overflow: hidden;
}
.calc::after {
  content: ""; position: absolute; inset: -40% -40% auto auto; width: 70%; height: 70%;
  background: radial-gradient(30rem 30rem at 100% 0, rgba(47,98,255,.25), transparent 60%);
  pointer-events: none;
}

.brand { display:flex; align-items:center; gap:.6rem; color:var(--muted); font-size:.85rem; letter-spacing:.06em; }
.brand b { color: var(--text); }

.display {
  margin: 14px 0 18px; background: #0e1230; border-radius: calc(var(--radius) - 6px);
  padding: 16px; min-height: 84px; display: grid; align-content: center; justify-items: end;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
.operation { color: var(--muted); font-size: .95rem; min-height: 1.2em; user-select: none; }
.result { font-size: 2rem; font-weight: 700; letter-spacing: .02em; overflow-x:auto; width:100%; text-align: right; }

.keys {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
}

button {
  -webkit-tap-highlight-color: transparent;
  background: var(--btn); color: var(--text); border: 0; border-radius: 16px;
  padding: 16px; font-size: 1.05rem; font-weight: 600; cursor: pointer;
  transition: transform .06s ease, filter .15s ease, background .2s ease;
  box-shadow: 0 4px 0 rgba(0,0,0,.25), 0 6px 20px rgba(0,0,0,.25);
  user-select: none;
}
button:active { transform: translateY(1px) scale(.99); }
button:focus-visible { outline: 2px solid #8db1ff; outline-offset: 2px; }

.span-2 { grid-column: span 2; }
.op { background: #26306a; }
.accent { background: var(--btn-accent); }
.danger { background: #6a2541; }

.footer { margin-top: 14px; text-align: center; color: var(--muted); font-size: .85rem; }
.kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; background: #0e1230; padding: .12rem .38rem; border-radius: 6px; }

@media (hover:hover) {
  button:hover { filter: brightness(1.06); }
}

  </style>
</head>
<body>
  <main class="calc" role="application" aria-label="Basic Calculator">
    <div class="brand" aria-hidden="true">ðŸ§® <b>Calculator</b> Â· Basic Ops</div>
    <section class="display" aria-live="polite">
      <div id="operation" class="operation"></div>
      <div id="result" class="result" aria-label="Current value">0</div>
    </section><section class="keys" aria-label="Calculator keys">
  <button class="danger" data-action="clear" aria-label="Clear all (Esc)">AC</button>
  <button data-action="delete" aria-label="Delete (Backspace)">DEL</button>
  <button class="op" data-value="/" aria-label="Divide (/)" >/</button>
  <button class="op" data-value="*" aria-label="Multiply (*)">Ã—</button>

  <button data-value="7">7</button>
  <button data-value="8">8</button>
  <button data-value="9">9</button>
  <button class="op" data-value="-" aria-label="Subtract (-)">âˆ’</button>

  <button data-value="4">4</button>
  <button data-value="5">5</button>
  <button data-value="6">6</button>
  <button class="op" data-value="+" aria-label="Add (+)">+</button>

  <button data-value="1">1</button>
  <button data-value="2">2</button>
  <button data-value="3">3</button>
  <button class="accent" data-action="equals" aria-label="Equals (=)">=</button>

  <button class="span-2" data-value="0">0</button>
  <button data-value="." aria-label="Decimal point">.</button>
  <button class="op" data-action="negate" aria-label="Toggle sign (Â±)">Â±</button>
</section>

<div class="footer">Tip: Use your keyboard: <span class="kbd">0â€“9</span>, <span class="kbd">+</span><span class="kbd">-</span><span class="kbd">*</span><span class="kbd">/</span>, <span class="kbd">=</span>, <span class="kbd">Enter</span>, <span class="kbd">Backspace</span>, <span class="kbd">Esc</span>.</div>

  </main> <script>
    (function() {
      const operationEl = document.getElementById('operation');
      const resultEl = document.getElementById('result');

      let input = '0'; // current token
      let trail = ''; // expression trail
      let justEvaluated = false;

      const isOperator = (ch) => ['+','-','*','/'].includes(ch);

      function updateDisplay() {
        operationEl.textContent = trail;
        resultEl.textContent = input || '0';
      }

      function clearAll() {
        input = '0'; trail = ''; justEvaluated = false; updateDisplay();
      }

      function deleteOne() {
        if (justEvaluated) { clearAll(); return; }
        if (input.length > 1) input = input.slice(0, -1);
        else input = '0';
        updateDisplay();
      }

      function appendDigit(d) {
        if (justEvaluated) { input = '0'; trail = ''; justEvaluated = false; }
        if (d === '.') {
          if (!input.includes('.')) input += '.';
          return updateDisplay();
        }
        if (input === '0') input = d; else input += d;
        updateDisplay();
      }

      function pushOperator(op) {
        if (justEvaluated) { trail = ''; justEvaluated = false; }
        // Avoid double operators; if last char in trail is operator, replace
        if (trail && isOperator(trail.at(-1)) && (input === '0' || input === '')) {
          trail = trail.slice(0, -1) + op; updateDisplay(); return;
        }
        trail += (trail ? '' : '') + input + op;
        input = '0';
        updateDisplay();
      }

      function negate() {
        if (input === '0') return; // do nothing for zero
        if (input.startsWith('-')) input = input.slice(1); else input = '-' + input;
        updateDisplay();
      }

      function evaluate() {
        // Compose expression and compute safely (no eval). We parse respecting precedence.
        const expr = trail + input;
        if (!expr) return;
        try {
          const value = compute(expr);
          input = String(value);
          trail = expr + '=';
          justEvaluated = true;
          updateDisplay();
        } catch (e) {
          input = 'Error'; trail = ''; justEvaluated = true; updateDisplay();
        }
      }

      function tokenize(s) {
        // tokens: numbers (with decimal), operators + - * /
        const tokens = [];
        let num = '';
        for (let i=0; i<s.length; i++) {
          const ch = s[i];
          if ((ch >= '0' && ch <= '9') || ch === '.') {
            num += ch;
          } else if (isOperator(ch)) {
            if (num !== '') { tokens.push(parseFloat(num)); num=''; }
            // handle unary minus for numbers like -3 or 5*-2
            if (ch === '-' && (tokens.length === 0 || typeof tokens[tokens.length-1] !== 'number')) {
              num = '-';
            } else {
              tokens.push(ch);
            }
          } else if (ch === '=') {
            // ignore
          } else if (ch === ' ') {
            continue;
          } else {
            throw new Error('Bad token');
          }
        }
        if (num !== '') tokens.push(parseFloat(num));
        return tokens;
      }

      function compute(s) {
        const tokens = tokenize(s);
        if (!tokens.length) return 0;
        // First pass: handle * and /
        const stack = [];
        let i = 0;
        while (i < tokens.length) {
          const t = tokens[i];
          if (t === '*' || t === '/') {
            const a = stack.pop();
            const b = tokens[++i];
            if (typeof a !== 'number' || typeof b !== 'number') throw new Error('Syntax');
            if (t === '/' && b === 0) throw new Error('Divide by zero');
            stack.push(t === '*' ? a * b : a / b);
          } else {
            stack.push(t);
          }
          i++;
        }
        // Second pass: handle + and -
        let result = stack[0];
        for (let j=1; j<stack.length; j+=2) {
          const op = stack[j];
          const val = stack[j+1];
          if (op === '+') result += val;
          else if (op === '-') result -= val;
          else throw new Error('Syntax');
        }
        // Round to avoid floating inaccuracies
        return parseFloat(Number(result).toFixed(12));
      }

      // Event handling
document.querySelector('.keys').addEventListener('click', (e) => {
  const btn = e.target.closest('button');
  if (!btn) return;
  const val = btn.getAttribute('data-value');
  const act = btn.getAttribute('data-action');

  if (val) {
    if (['+','-','*','/'].includes(val)) {
      pushOperator(val); // handle operators
    } else {
      appendDigit(val); // handle numbers & decimal
    }
  } else if (act) {
    if (act === 'clear') clearAll();
    else if (act === 'delete') deleteOne();
    else if (act === 'equals') evaluate();
    else if (act === 'negate') negate();
  }
});


      // Keyboard support
      window.addEventListener('keydown', (e) => {
        const k = e.key;
        if ((k >= '0' && k <= '9')) { appendDigit(k); }
        else if (k === '.') { if (!input.includes('.')) appendDigit('.'); }
        else if (['+','-','*','/'].includes(k)) { pushOperator(k); }
        else if (k === 'Enter' || k === '=') { e.preventDefault(); evaluate(); }
        else if (k === 'Backspace') { deleteOne(); }
        else if (k === 'Escape') { clearAll(); }
      });

      updateDisplay();
    })();
  </script></body>
</html>
